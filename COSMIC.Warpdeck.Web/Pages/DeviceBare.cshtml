@page "/deviceBare/{deviceId}"
@model COSMIC.Warpdeck.Web.Pages.DeviceBare

@{
    Layout = null;
}
<link href="/vendor/boostrap-5.1.3/css/bootstrap.min.css" rel="stylesheet"/>
<script src="/vendor/boostrap-5.1.3/js/popper.min.js" crossorigin="anonymous"></script>
<script src="/vendor/boostrap-5.1.3/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<link href="/css/layout.css" rel="stylesheet">
<link href="/css/pages.css" rel="stylesheet">

<div id="deviceBareApp">
<div class="container-fluid" id="keymapGrid">
    <WdComponentGrid @@component-click="componentClick" deviceId="@Model.Device.DeviceId" layerId="active" rows="@Model.Device.Info.Rows" columns="@Model.Device.Info.Columns"></WdComponentGrid>
</div>

<script>
document.addEventListener("DOMContentLoaded", function(event) { 
    function key_pressed(key) {
        let  keyData = key.parentNode.dataset

        fetch(`/api/device/${keyData.deviceid}/keys/${keyData.keyid}/press`, {method: "POST"}).then(
            (response) => {console.log(response.json())}
        );
        
    }
    function key_held(key) {
        let  keyData = key.parentNode.dataset
        fetch(`/api/device/${keyData.deviceid}/keys/${keyData.keyid}/hold`, {method: "POST"}).then(
             (response) => {console.log(response.json())}
         );
    }
    
});
</script>
</div>
<!-- Warpdeck API and Vue -->
<script src="/js/warpdeck.js"></script>
<script type="module" src="/Apps/DeviceBareApp.js"></script>
