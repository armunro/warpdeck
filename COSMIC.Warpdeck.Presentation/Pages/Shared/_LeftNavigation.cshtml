@using Autofac
@using COSMIC.Warpdeck.Domain.Device
@using COSMIC.Warpdeck.UseCase.Device
<nav id="sidebarMenu" class="col-md-3 col-lg-2 d-md-block bg-light sidebar collapse d-block">
    <div class="position-sticky pt-3">
        <h3 class="sidebar-heading d-flex justify-content-between align-items-center px-2  text-muted">
            <span>Devices</span>
        </h3>
        <ul class="nav d-block">
            @foreach (var v in COSMIC.Warpdeck.Presentation.WarpDeckFrontend.Container.Resolve<DeviceManager>().GetAllDevices())
            {
                <li class="nav-item">
                    <a class="nav-link px-2" aria-current="page" href="/device/@v.DeviceId">@v.DeviceId</a>
                    <ul class="nav d-block">
                        <li>
                            <a class="nav-link" href="/device/@v.DeviceId/monitor">Monitors (@v.MonitorRules.Rules.Count)</a>
                        </li>
                        <li>
                            <a class="nav-link" href="/device/@v.DeviceId/property">Properties (@v.PropertyRules.Count)</a>
                        </li>
                    </ul>

                    <ul class="nav d-block">
                        <li>
                            <h6 class="sidebar-heading d-flex justify-content-between align-items-center px-3 my-0 text-muted">Layers</h6>
                        </li>
                        @foreach (var j in v.Layers)
                        {
                            <li class="nav-item">
                                <a class="nav-link px-3 py-1" aria-current="page" href="/device/@v.DeviceId/layer/@j.Key">
                                    @j.Key
                                </a>
                            </li>
                        }
                    </ul>

                </li>
            }
        </ul>
</div>
</nav>