@page "/deviceBare/{deviceId}"
@using COSMIC.Warpdeck.Presentation.Pages
@model COSMIC.Warpdeck.Presentation.Pages.DeviceBare

@{
    Layout = null;
}
<link href="/vendor/boostrap-5.1.3/css/bootstrap.min.css" rel="stylesheet"/>
<script src="/vendor/boostrap-5.1.3/js/popper.min.js" crossorigin="anonymous"></script>
<script src="/vendor/boostrap-5.1.3/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
<link href="/css/layout.css" rel="stylesheet">
<link href="/css/pages.css" rel="stylesheet">
<script src="/js/Partials/KeyGrid.js"></script>
<script src="/js/Pages/Device.js"></script>


<div class="container-fluid" id="keymapGrid">
</div>


<script>
document.addEventListener("DOMContentLoaded", function(event) { 
    function key_pressed(key) {
        console.log("pressed:" + key);
    }
    function key_held(key) {
        console.log("Held:" + key);
    }
    
    window.keyGrid = new KeyGrid("keymapGrid","@(Model.CurrentDevice.DeviceId)","active", {disableSelection: true});
    window.keyGrid.registerKeyClickCallback(key_pressed);
    window.keyGrid.registerKeyHoldCallback(key_held);
    window.devicePage = new Device("@(Model.CurrentDevice.DeviceId)")
});
</script>